<!DOCTYPE html>
<html lang="en">
    <head>
    <title>Arts | Training Services</title>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
    <meta name="description" content="Arts | Training Services"/>

    <link rel="icon" type="image/png" href="img/logo-icon.png">
    <link rel="stylesheet" href="css/bootstrap.min.css"/>
    <link rel="stylesheet" href="css/owl.carousel.css"/>
    <link rel="stylesheet" href="css/animate.min.css"/>
    <link rel="stylesheet" href="css/aos.css"/>
    <link rel="stylesheet" href="css/font-awesome.min.css"/>
    <link rel="stylesheet" href="css/themify-icons.css"/>
    <link rel="stylesheet" href="css/simple-line-icons.css">
    <link rel="stylesheet" href="css/include.css"/>
    <link rel="stylesheet" href="css/ocean.css">
    <link rel="stylesheet" href="css/register.css"/>
    <script src="config.js"></script>


    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.6.2/css/all.min.css" integrity="sha512-g0gRzvKX9GBUbjlJZ02n2GLRJVabgLm6b3oypbkF6ne1T2+ZHCucKRd8qt31a3BCGahAlBmXUDS7lu2pYuWB7A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body>

  <nav class="navBar" id="logInForm">
    <div class="large-container">
      <a href="index.html" class="logo-brand">
        <img src="img/site-logo.png">
      </a>
     
    </div>
  </nav>

  <section class="reg-sec">
    <div class="site-container">
      <div class="reg-sec-main">
        <div class="reg-box">
          <div class="reg-box-nav">
            <a href="signup.html">Sign up</a>
            <a href="login.html" class="active-regNav">Sign in</a>
          </div>
          <div class="reg-box-form-sec">
            <div class="reg-box-form-tOp">
            <h3>Sign in to Your Account.</h3>
            <p>Build skills for today, tomorrow, and beyond. Education to future-proof your career.</p>
            <div class="ss-herf">
              <a href="#">
                <svg width="24" height="24" viewBox="0 0 24 24"><g fill="none"><path fill="#4285F4" d="M23.49,12.27 C23.49,11.48 23.42,10.73 23.3,10 L12,10 L12,14.51 L18.47,14.51 C18.18,15.99 17.33,17.24 16.07,18.09 L16.07,21.09 L19.93,21.09 C22.19,19 23.49,15.92 23.49,12.27 Z"></path><path fill="#34A853" d="M12,24 C15.24,24 17.95,22.92 19.93,21.09 L16.07,18.09 C14.99,18.81 13.62,19.25 12,19.25 C8.87,19.25 6.22,17.14 5.27,14.29 L1.29,14.29 L1.29,17.38 C3.26,21.3 7.31,24 12,24 Z"></path><path fill="#FBBC05" d="M5.27,14.29 C5.02,13.57 4.89,12.8 4.89,12 C4.89,11.2 5.03,10.43 5.27,9.71 L5.27,6.62 L1.29,6.62 C0.47,8.24 0,10.06 0,12 C0,13.94 0.47,15.76 1.29,17.38 L5.27,14.29 Z"></path><path fill="#EA4335" d="M12,4.75 C13.77,4.75 15.35,5.36 16.6,6.55 L20.02,3.13 C17.95,1.19 15.24,0 12,0 C7.31,0 3.26,2.7 1.29,6.62 L5.27,9.71 C6.22,6.86 8.87,4.75 12,4.75 Z"></path></g></svg>
             <span> <span>Sign in with</span> Google</span></a>
              <a href="#">
                <svg width="24" height="24" viewBox="0 0 24 24"><g fill="none" fill-rule="evenodd"><path fill="#1877F2" d="M24,12 C24,5.37257812 18.6274219,0 12,0 C5.37257813,0 0,5.37257812 0,12 C0,17.9895469 4.38822656,22.9539844 10.125,23.8541719 L10.125,15.46875 L7.078125,15.46875 L7.078125,12 L10.125,12 L10.125,9.35625 C10.125,6.34875 11.9165391,4.6875 14.6575547,4.6875 C15.9705,4.6875 17.34375,4.921875 17.34375,4.921875 L17.34375,7.875 L15.8305547,7.875 C14.3398828,7.875 13.875,8.80000781 13.875,9.74899219 L13.875,12 L17.203125,12 L16.6710937,15.46875 L13.875,15.46875 L13.875,23.8541719 C19.6117734,22.9539844 24,17.9895469 24,12"></path><path fill="#FFF" d="M16.6710938,15.46875 L17.203125,12 L13.875,12 L13.875,9.74899219 C13.875,8.80000781 14.3398828,7.875 15.8305547,7.875 L17.34375,7.875 L17.34375,4.921875 C17.34375,4.921875 15.9705,4.6875 14.6575547,4.6875 C11.9165391,4.6875 10.125,6.34875 10.125,9.35625 L10.125,12 L7.078125,12 L7.078125,15.46875 L10.125,15.46875 L10.125,23.8541719 C10.7359453,23.9500312 11.362125,24 12,24 C12.637875,24 13.2640547,23.9500312 13.875,23.8541719 L13.875,15.46875 L16.6710938,15.46875 Z"></path></g></svg>
              <span><span>Sign in with</span> Facebook</span></a>
            </div>
          </div>

          <div class="orjs-sec">
            <span>Or</span>
          </div>

          <form class="reg-form" >
            <div class="form-input">
              <input type="text" name="" placeholder="Email Address" id="logEmail">
            </div>
            <div class="form-input">
              <input type="password" name="" placeholder="Password" id="logPass">
              <span id="pass-btn" onclick="showHide()">
                <svg class="showPass" viewBox="0 0 32 32" fill="#333"><path d="M16 9c4.45 0 8.076 2.417 10.73 6.997a2 2 0 01-.088 2.145C23.96 21.998 20.357 24 16 24c-4.357 0-7.96-2.002-10.642-5.858a2 2 0 01-.088-2.145C7.924 11.417 11.55 9 16 9zm0 2c-3.682 0-6.682 2-9 6 2.318 3.333 5.318 5 9 5 3.682 0 6.682-1.667 9-5-2.318-4-5.318-6-9-6zm0 1a4 4 0 110 8 4 4 0 010-8zm0 2a2 2 0 100 4 2 2 0 000-4z"></path></svg>

                <svg class="hidePass" viewBox="0 0 32 32" fill="#333"><path d="M26.73 15.997a2 2 0 01-.088 2.145C23.96 21.998 20.357 24 16 24c-1.165 0-2.276-.143-3.33-.427l1.69-1.69c.53.078 1.077.117 1.64.117 3.682 0 6.682-1.667 9-5-.756-1.304-1.584-2.395-2.484-3.274l1.414-1.412c1.027 1.006 1.962 2.237 2.8 3.683zM23.071 8.93a1 1 0 010 1.414L10.343 23.071a1 1 0 01-1.414-1.414L21.657 8.929a1 1 0 011.414 0zM16 9c.86 0 1.69.09 2.488.27l-1.758 1.757A9.817 9.817 0 0016 11c-3.682 0-6.682 2-9 6 .535.77 1.107 1.45 1.715 2.042L7.3 20.456a15.978 15.978 0 01-1.943-2.314 2 2 0 01-.088-2.145C7.924 11.417 11.55 9 16 9zm.252 10.992l3.74-3.74a4 4 0 01-3.74 3.74zm-.503-7.984l-3.741 3.74a4 4 0 013.741-3.74z"></path></svg>
              </span>
            </div>
            <div class="form-input">
              <p>By clicking "Sign in," you agree to our <a href="#">Terms of Use</a> and our <a href="#">Privacy Policy</a>.</p>
            </div>
            <div class="form-submit-input">
              <button id="signInBtn">Sign in </button>
            </div>

            <div class="form-input-sub">
              <a href="forgot-password.html">Forgot your password?</a>
            </div>

          <div class="orjs-sec">
            <span>Or</span>
          </div>

           <div class="form-input-sub">
              <a href="signup.html">Create a new account</a>
            </div>
          </form>
          </div>
        </div>
      </div>
    </div>
  </section>


    


   <script src="js/jquery-3.3.1.min.js"></script>
   <script src="js/bootstrap.min.js"></script>
   <script src="js/jquery.easing.1.3.js"></script>
   <script src="js/aos.js"></script>
   <script src="js/loader.js"></script>
   <script src="js/typed.min.js"></script>
   <script src="js/owl.carousel.min.js"></script>

<!-- main site .js -->
  <script src="js/main.js"></script>
  <script src="js/index.js"></script>
 
  <script>
if (document.querySelector("#logInForm")) {

    localStorage.removeItem('accessToken');
    localStorage.removeItem('userId');
    localStorage.removeItem('userFirstName');
    localStorage.removeItem('userLastName');

    document.getElementById('signInBtn').addEventListener('click', function(event) {
        event.preventDefault(); // Prevent the default form submission
        
        // Change button text to "Signing in..."
        document.getElementById('signInBtn').textContent = 'Signing in...';

        // Get form data
        let formData = {
            password: document.getElementById("logPass").value,
            email: document.getElementById("logEmail").value
        };

        // Send POST request using fetch API
        fetch(`${SERVER_URL}/user/login/`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(formData),
        })
        .then(response => {
            if (response.ok) {
                // Save response details to local storage
                return response.json();
            }
            throw new Error('Network response was not ok.');
        })
        .then(data => {
            // Handle successful login
            console.log(data.user_type)
            console.log(data.image)
            localStorage.setItem('accessToken', data.access_token);
            localStorage.setItem('userId', data.user_id);
            localStorage.setItem('userFirstName', data.first_name);
            localStorage.setItem('userImage', data.image);
            localStorage.setItem('userLastName', data.last_name);
            localStorage.setItem('userEmail', data.email);
            // Redirect to courses page
            if (data.user_type === "admin"){
              window.location.href = 'admin-dashboard/dashboard.html';
            }
            else{
              window.location.href = 'courses.html';
            }
        })
        .catch(error => {
            // Handle login errors
            alert("Incorrect email or password");
            console.error('There was a problem with the fetch operation:', error);
            // Change button text back to "Sign in"
            document.getElementById('signInBtn').textContent = 'Sign in';
        });
    });
}

  </script>
</body>
</html>