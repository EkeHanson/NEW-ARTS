<!DOCTYPE html>
<html lang="en">
    <head>
         <title>A.R.T.S | Training Services</title>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
     <meta name="description" content="">

    <link rel="icon" type="image/png" href="img/logo-icon.png">
    <link rel="stylesheet" href="css/owl.carousel.css"/>
    <link rel="stylesheet" href="css/animate.min.css"/>
    <link rel="stylesheet" href="css/aos.css"/>
    <link rel="stylesheet" href="css/font-awesome.min.css"/>
    <link rel="stylesheet" href="css/themify-icons.css"/>
    <link rel="stylesheet" href="css/loader.css"/>
    <link rel="stylesheet" href="css/simple-line-icons.css">
    <link rel="stylesheet" href="css/include.css">
    <link rel="stylesheet" href="css/dashboard.css"/>



      <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">


<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Satisfy&display=swap" rel="stylesheet">

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Abhaya+Libre:wght@400;500;600;700;800&display=swap" rel="stylesheet">

</head>
<body>


 
    <section class="upload-Sec cartegory-Box">
        <div class="upload-Box">
            <div class="upload-Box-header">
                <h3>Add course cartegory</h3>
                <span class="Close-Upload-Box"><i class="ti-close"></i></span>
            </div>
            <div class="upload-Box-body">
                <form>
                    <div class="input-Div">
                        <p>Title</p>
                        <input id="category-title" type="text" name="" placeholder="Enter course title">
                    </div>
                    <div class="input-Div">
                        <p>Course cartegory banner</p>
                        <input id="category-image" type="file" name="">
                    </div>
                    <div class="input-Div">
                        <p>Description (optional)</p>
                        <textarea  id="category-description" placeholder="Enter course description"></textarea>
                    </div>

                    <div class="Submit-Div">
                        <input id="submit-category" type="submit" name="" value="Submit">
                    </div>
                </form>
            </div>
        </div>
    </section>




    <section class="site-content">
        <div class="nav-sec">
            <div class="nav-sec-main Box-Show">

                <div class="top-side-nav">
                    <i class="icon-menu"></i>
                    <span>Menu</span>
                 </div>
                  <div class="m-search-Sec">
                            <button>
                                <img src="svg/search.svg">
                            </button>
                            <input type="text" name="" placeholder="Search..">
                    </div>

                     <div class="side-nav-Icon">

                         <ul>
                             <li>
                                <a href="dashboard.html"><i class="icon-speedometer"></i> <span>Dashboard</a>
                            </li>

                            <li class="active-sideIcon">
                                <a href="category.html"><i class="icon-pie-chart"></i> <span>Course categories</span></a>
                            </li>

                             <li>
                                <a href="courses.html"><i class="icon-layers"></i> <span>Courses</span></a>
                            </li>


                              <li><a href="enrolled-courses.html"><i class="icon-book-open"></i> <span>Enrolled courses</span> </a></li>

                              <li><a href="instructors.html"><i class="icon-badge"></i> <span>Instructors</span> </a></li>

                               <li><a href="users.html"><i class="icon-people"></i> <span>Users</span> </a></li>


                              <li><a href="profile.html"><i class="icon-user"></i> <span>Profile settings</span> </a></li>


                             <li><a href="#"><i class="icon-logout"></i> <span>Logout</span></a></li>

                         </ul>
                     </div>



            </div>
        </div><!--nav-sec-->
        <div class="main-section">
            <div class="main-sectionMain">
                <div class="nav-body"></div>
            <nav class="main-topNav Box-Show">
                <div class="main-sectionMain-0">
                <div class="site-container">
                    <div class="nanAv-1">
                         <div class="nav-togller">
                            <i class="ti-menu"></i>
                            <span>
                                <svg height="14" viewBox="0 0 16 16" width="18" xmlns="http://www.w3.org/2000/svg" aria-label="close" class="" name="close"><path d="M8.95 8l5.853-5.854a.671.671 0 1 0-.95-.95L8 7.05 2.146 1.198a.671.671 0 1 0-.95.95L7.05 8l-5.852 5.853a.671.671 0 0 0 .948.95L8 8.948l5.854 5.854a.671.671 0 1 0 .948-.95L8.95 8z" fill="#151A1E" fill-rule="nonzero" stroke="#151A1E"></path></svg>
                            </span>
                        </div>
                        <a href="../index.html" class="nv-logo"><img src="img/logo.png"></a>
                        <div class="search-Sec">
                            <button>
                                <img src="svg/search.svg">
                            </button>
                            <input type="text" name="" placeholder="Search..">
                    </div>
                    </div>
                    <div class="nanAv-2">
                        <ul class="nanAv-2-icons">
                            <li>
                                <a href="../index.html"><span class="homa-ye">Home</span><i class="icon-home"></i></a>
                            </li>


                            <li><a href="profile.html"><span class="accnt-ion">Profile</span> <span class="user-imgSpan"><img src="img/user-img.jpg"></span></a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            </nav>



            <div class="dashboard-sec">
                <div class="main-Dash-sec">
                <div class="site-container">


                    <div class="affiliate-Sec Box-Show">
                       <div class="hello-intro">
                              <h1>Course Categories</h1>
                                    <ul>
                                      <li>A.R.T.S</li>
                                      <li>Admin</li>
                                      <li class="active-li">Categories</li>
                                    </ul>
                               </div>


                               
                            <div class="p-Main-t">
                                <ul>
                                    <li class="active-ppt"><a href="#">All</a></li>
                                    <li><a href="#">Most Recent</a></li>
                                    <li><a href="#">Old</a></li>
                                </ul>
                                <div class="p-Main-tt">
                                <p>Search</p>
                                <div class="p-Main-t-search">
                                    <input type="text" name="" placeholder="Courses"/>
                                    <button><img src="svg/search1.svg"></button>
                                </div>
                            </div>
                            </div>



                    </div><!--affiliate-Sec-->



                        <div class="affiliate-Sec Box-Show">
                       <div class="top-das-1-header">
                            <h3>Course Categories</h3>
                            <button class="cartegory-Btn"><i class="fa fa-plus"></i> add course category</button>
                        </div>

                        <div class="Sec-table">
                            <table id="category-table">
                                <thead>
                                    <tr>
                                        <th>S/N</th>
                                        <th>Category name</th>
                                        <th>Courses</th>
                                        <th>Total enrolled users</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                                <tbody id="category-table-body">

                                     <!--   <tr>
                                        <td>1</td>
                                      
                                         <td>
                                            <div class="instruc-dlt-main">
                                          <div class="instruc-profl">
                                               <div class="instruc-profl-grid">
                                            <div class="profl-img">
                                              <div class="profl-img-main">
                                                <img src="img/staffs/1.jpg">
                                              <span class="online"></span>
                                            </div>
                                              
                                            </div>
                                            <div class="profl-dlts">
                                              <p>Health</p>
                                            </div>
                                          </div>
                                        </div>
                                        </td>
                                        <td> 0</td>
                                        <td>0</td>
                                        <td>
                                            <div class="action-btns">
                                                <a href="javascript:void(0);" style="background:#6FD96F !important;" class="cartegory-Btn"><i class="icon-user"></i> Edit</a>
                                                <button><i class="ti-close"></i>  Remove</button>
                                            </div>
                                        </td>
                                    </tr> -->

                                   
                                    
                                </tbody>
                            </table>
                        </div>

                        

                    </div><!--affiliate-Sec-->


                
      

                </div>

            </div><!--main-Dash-sec-->
                   <footer class="site-footer Box-Show">
                    <div class="site-container">
                   <p>© <script>document.write(new Date().getFullYear())</script> A.R.T.S</p>
               </div>
           </footer>
            </div>





















        </div>
        </div><!--main-section-->
    </section><!--site-content-->


   <script src="js/jquery-3.3.1.min.js"></script>
   <script src="js/owl.carousel.min.js"></script>
   <script src="js/aos.js"></script>
    <script src="js/loader.js"></script>
     <script src="js/main.js"></script>
         <script src='js/chart.js'></script>
    <script src="js/chat-canvas.js"></script>


    <script>
        document.getElementById('submit-category').addEventListener('click', function(event) {
            event.preventDefault(); // Prevent default form submission behavior
    
            // Get form data
            alert('submit-category selected')
          
            let name = document.getElementById('category-title').value;
            let details = document.getElementById('category-description').value;
            let imageInput = document.getElementById('category-image');
            let image = imageInput.files[0];
    
            // Create a FormData object
            let formData = new FormData();
            formData.append('name', name);
            formData.append('details', details);
            formData.append('image', image);
    
            // Send POST request using fetch API
            document.getElementById('submit-category').textContent = "Submitting ..."
            fetch('https://new-arts-api.onrender.com/course/categories/', {
                method: 'POST',
                body: formData,
            })
            .then(response => {
                if (response.ok) {
                    // Category created successfully
                    document.getElementById('submit-category').textContent = "Submitting"
                    window.location.href = "category.html";
                } else {
                    // Error handling
                    throw new Error('Failed to create category');
                }
            })
            .catch(error => {
                document.getElementById('submit-category').textContent = "Submitting"
                console.error('Error:', error);
                alert('An error occurred while creating the category.');
            });
        });

    </script>
    <script>// Function to send a GET request to the endpoint
        function fetchData() {
          fetch('https://new-arts-api.onrender.com/course/categories/')
            .then(response => {
              if (!response.ok) {
                throw new Error('Network response was not ok');
              }
              return response.json();
            })
            .then(data => {
              // Call a function to populate the table with the response data
              populateTable(data);
            })
            .catch(error => {
              console.error('There was a problem with the fetch operation:', error);
            });
        }
        
        // Function to populate the table with the response data
        function populateTable(responseData) {
          // Get the table body element
          var tbody = document.getElementById('category-table-body');
        
          // Clear existing table rows
          tbody.innerHTML = '';
        
          // Iterate over the response data and generate table rows
          responseData.forEach(function(category, index) {
            // Calculate total number of students
            let totalStudents = 0;
            category.courses.forEach(course => {
              if (course.number_of_students !== null) {
                totalStudents += course.number_of_students;
              }
            });
        
            // Create a new table row
            var row = document.createElement('tr');
        
            // Add data to the row
            row.innerHTML = `
              <td>${index + 1}</td>
              <td>
                <div class="instruc-dlt-main">
                  <div class="instruc-profl">
                    <div class="instruc-profl-grid">
                      <div class="profl-img">
                        <div class="profl-img-main">
                          <img src="https://new-arts-api.onrender.com${category.image}" alt="${category.name}">
                          <span class="online"></span>
                        </div>
                      </div>
                      <div class="profl-dlts">
                        <p>${category.name}</p>
                      </div>
                    </div>
                  </div>
                </div>
              </td>
              <td>${category.courses.length}</td>
              <td>${totalStudents}</td>
              <td>
                <div class="action-btns">
                  <a href="javascript:void(0);" style="background:#6FD96F !important;" class="cartegory-Btn"><i class="icon-user"></i> Edit</a>
                  <button><i class="ti-close"></i> Remove</button>
                </div>
              </td>
            `;
        
            // Append the row to the table body
            tbody.appendChild(row);
          });
        }
        
        // Fetch data when the page loads
        fetchData();
        
    </script>


   </body>
   </html>