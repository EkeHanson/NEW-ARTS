<!DOCTYPE html>
<html lang="en">
    <head>
         <title>A.R.T.S | Training Services</title>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
     <meta name="description" content="">

    <link rel="icon" type="image/png" href="img/logo-icon.png">
    <link rel="stylesheet" href="css/owl.carousel.css"/>
    <link rel="stylesheet" href="css/animate.min.css"/>
    <link rel="stylesheet" href="css/aos.css"/>
    <link rel="stylesheet" href="css/font-awesome.min.css"/>
    <link rel="stylesheet" href="css/themify-icons.css"/>
    <link rel="stylesheet" href="css/loader.css"/>
    <link rel="stylesheet" href="css/simple-line-icons.css">
    <link rel="stylesheet" href="css/include.css">
    <link rel="stylesheet" href="css/dashboard.css"/>



      <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">


<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Satisfy&display=swap" rel="stylesheet">

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Abhaya+Libre:wght@400;500;600;700;800&display=swap" rel="stylesheet">

</head>
<body>


    <section class="site-content">
        <div class="nav-sec">
            <div class="nav-sec-main Box-Show">

                <div class="top-side-nav">
                    <i class="icon-menu"></i>
                    <span>Menu</span>
                 </div>
                  <div class="m-search-Sec">
                            <button>
                                <img src="svg/search.svg">
                            </button>
                            <input type="text" name="" placeholder="Search..">
                    </div>

                     <div class="side-nav-Icon">

                         <ul>
                             <li>
                                <a href="dashboard.html"><i class="icon-speedometer"></i> <span>Dashboard</a>
                                </li>

                                <li class="active-sideIcon">
                                    <a href="category.html"><i class="icon-pie-chart"></i> <span>Course categories</span></a>
                                </li>

                             <li>
                                <a href="courses.html"><i class="icon-layers"></i> <span>Courses</span></a>
                            </li>


                              <li class="active-sideIcon"><a href="enrolled-courses.html"><i class="icon-book-open"></i> <span>Enrolled courses</span> </a></li>

                              <li><a href="instructors.html"><i class="icon-badge"></i> <span>Instructors</span> </a></li>

                               <li><a href="users.html"><i class="icon-people"></i> <span>Users</span> </a></li>


                              <li><a href="profile.html"><i class="icon-user"></i> <span>Profile settings</span> </a></li>


                             <li><a href="#"><i class="icon-logout"></i> <span>Logout</span></a></li>

                         </ul>
                     </div>



            </div>
        </div><!--nav-sec-->
        <div class="main-section">
            <div class="main-sectionMain">
                <div class="nav-body"></div>
            <nav class="main-topNav Box-Show">
                <div class="main-sectionMain-0">
                <div class="site-container">
                    <div class="nanAv-1">
                         <div class="nav-togller">
                            <i class="ti-menu"></i>
                            <span>
                                <svg height="14" viewBox="0 0 16 16" width="18" xmlns="http://www.w3.org/2000/svg" aria-label="close" class="" name="close"><path d="M8.95 8l5.853-5.854a.671.671 0 1 0-.95-.95L8 7.05 2.146 1.198a.671.671 0 1 0-.95.95L7.05 8l-5.852 5.853a.671.671 0 0 0 .948.95L8 8.948l5.854 5.854a.671.671 0 1 0 .948-.95L8.95 8z" fill="#151A1E" fill-rule="nonzero" stroke="#151A1E"></path></svg>
                            </span>
                        </div>
                        <a href="../index.html" class="nv-logo"><img src="img/logo.png"></a>
                        <div class="search-Sec">
                            <button>
                                <img src="svg/search.svg">
                            </button>
                            <input type="text" name="" placeholder="Search..">
                    </div>
                    </div>
                    <div class="nanAv-2">
                        <ul class="nanAv-2-icons">
                            <li>
                                <a href="../index.html"><span class="homa-ye">Home</span><i class="icon-home"></i></a>
                            </li>


                            <li><a href="profile.html"><span class="accnt-ion">Profile</span> <span class="user-imgSpan"><img src="img/user-img.jpg"></span></a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            </nav>



            <div class="dashboard-sec">
                <div class="main-Dash-sec">
                <div class="site-container">


                    <div class="affiliate-Sec Box-Show">
                       <div class="hello-intro">
                              <h1 id="course_title">Introduction to health and safety management</h1>
                                    <ul>
                                      <li>A.R.T.S</li>
                                      <li>Admin</li>
                                      <li class="active-li">Users</li>
                                    </ul>
                               </div>


                               
                            <div class="p-Main-t">
                                <ul>
                                    <li class="active-ppt"><a href="#">All</a></li>
                                    <li><a href="#">Most Recent</a></li>
                                    <li><a href="#">Old</a></li>
                                </ul>
                                <div class="p-Main-tt">
                                <p>Search</p>
                                <div class="p-Main-t-search">
                                    <input type="text" name="" placeholder="Users"/>
                                    <button><img src="svg/search1.svg"></button>
                                </div>
                            </div>
                            </div>



                    </div><!--affiliate-Sec-->



                        <div class="affiliate-Sec Box-Show">
                       <div class="top-das-1-header">
                            <h3>Enrolled users</h3>
                            <p>Enrolled</p>
                        </div>

                        <div class="Sec-table">
                            <table id="userTable">
                                <thead>
                                    <tr>
                                        <th>S/N</th>
                                        <th>Email</th>
                                        <th>First name</th>
                                        <th>Last name</th>
                                        <th>Course category</th>
                                        <th>Date</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- <tr>
                                        <td>1</td>
                                        <td><a href="mailto:princegodson24@gmail.com" class="email-Ahrf">princegodson24@gmail.com</a></td>
                                        <td>Prince</td>
                                        <td>Godson</td>
                                        <td>Health</td>
                                        <td>Mon, 16th May 2023</td>
                                    </tr> -->

                                     <!-- <tr>
                                        <td>2</td>
                                        <td><a href="mailto:princegodson24@gmail.com" class="email-Ahrf">princegodson24@gmail.com</a></td>
                                        <td>Prince</td>
                                        <td>Godson</td>
                                        <td>Health</td>
                                        <td>Mon, 16th May 2023</td>
                                    </tr> -->

                                    <!-- <tr>
                                        <td>3</td>
                                        <td><a href="mailto:princegodson24@gmail.com" class="email-Ahrf">princegodson24@gmail.com</a></td>
                                        <td>Prince</td>
                                        <td>Godson</td>
                                        <td>Health</td>
                                        <td>Mon, 16th May 2023</td>
                                    </tr> -->

                                </tbody>
                            </table>
                        </div>

                        

                    </div><!--affiliate-Sec-->


                
      

                </div>

            </div><!--main-Dash-sec-->
                   <footer class="site-footer Box-Show">
                    <div class="site-container">
                   <p>Â© <script>document.write(new Date().getFullYear())</script> A.R.T.S</p>
               </div>
           </footer>
            </div>










        </div>
        </div><!--main-section-->
    </section><!--site-content-->


   <script src="js/jquery-3.3.1.min.js"></script>
   <script src="js/owl.carousel.min.js"></script>
   <script src="js/aos.js"></script>
    <script src="js/loader.js"></script>
     <script src="js/main.js"></script>
         <script src='js/chart.js'></script>
    <script src="js/chat-canvas.js"></script>

    <script>
        window.onload = function() {
            const urlParams = new URLSearchParams(window.location.search);
            const courseId = urlParams.get('course_id');
            console.log(courseId)
            const categoryName = urlParams.get('category_name');
            const courseTitle = urlParams.get('course_title');
            document.getElementById("course_title").textContent = courseTitle;
    
            fetch(`http://127.0.0.1:9090/user/create/${courseId}/`)
                .then(response => response.json())
                .then(data => {
                    // console.log(data); // Log the response data
                    const enrolledCourses = data.enrolled_courses;
    
                    // Check if courseId is in the enrolledCourses array
                    if (enrolledCourses.includes(parseInt(courseId))) {
                        const tableBody = document.querySelector('#userTable tbody');
                        const row = tableBody.insertRow();
                        const serialNumberCell = row.insertCell(0);
                        const emailCell = row.insertCell(1);
                        const firstNameCell = row.insertCell(2);
                        const lastNameCell = row.insertCell(3);
                        const courseCategoryCell = row.insertCell(4); // This cell is for category
                        const dateCell = row.insertCell(5);
    
                        serialNumberCell.textContent = 1;
                        emailCell.innerHTML = `<a href="mailto:${data.email}" class="email-Ahrf">${data.email}</a>`;
                        firstNameCell.textContent = data.first_name;
                        lastNameCell.textContent = data.last_name;
                        courseCategoryCell.textContent = categoryName; // Set category name directly
                        dateCell.textContent = formatDate(data.last_login);
                    } else {
                        alert("Course not found in enrolled courses.");
                    }
                })
                .catch(error => console.error('Error fetching data:', error));
        };
        function formatDate(dateString) {
            const date = new Date(dateString);
            const options = { weekday: 'short', day: '2-digit', month: 'short', year: 'numeric' };
            const formattedDate = date.toLocaleDateString('en-US', options);
            return formattedDate.replace(/(\d)(st|nd|rd|th)/, '$1<sup>$2</sup>');
        }
    </script>
    
    
    
    
    
   </body>
   </html>