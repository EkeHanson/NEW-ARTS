<!DOCTYPE html>
<html lang="en">
    <head>
         <title>A.R.T.S | Training Services</title>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
     <meta name="description" content="">

    <link rel="icon" type="image/png" href="img/logo-icon.png">
    <link rel="stylesheet" href="css/owl.carousel.css"/>
    <link rel="stylesheet" href="css/animate.min.css"/>
    <link rel="stylesheet" href="css/aos.css"/>
    <link rel="stylesheet" href="css/font-awesome.min.css"/>
    <link rel="stylesheet" href="css/themify-icons.css"/>
    <link rel="stylesheet" href="css/loader.css"/>
    <link rel="stylesheet" href="css/simple-line-icons.css">
    <link rel="stylesheet" href="css/include.css">
    <link rel="stylesheet" href="css/dashboard.css"/>
    <script src="../config.js"></script>



      <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">


<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Satisfy&display=swap" rel="stylesheet">

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Abhaya+Libre:wght@400;500;600;700;800&display=swap" rel="stylesheet">

</head>
<body>

    <section class="upload-Sec instructor-Box">
        <div class="upload-Box">
            <div class="upload-Box-header">
                <h3>Add Instructor</h3>
                <span class="Close-Upload-Box"><i class="ti-close"></i></span>
            </div>
            <div class="upload-Box-body">
                <form>
                    <div class="input-Div">
                        <p>Instructor ID</p>
                        <input type="text" name="" value="ARTS ID: 000761IS">
                    </div>
                    <div class="input-Div">
                        <p>Email</p>
                        <input id="instructor-email" type="text" name="" placeholder="Enter email address">
                    </div>
                    <div class="Dd-Flex">
                    <div class="input-Div">
                        <p>First name</p>
                        <input id="instructor-first-name" type="text" name="" placeholder="Enter first name">
                    </div>
                    <div class="input-Div">
                        <p>Last name</p>
                        <input id="instructor-last-name" type="text" name="" placeholder="Enter last name">
                    </div>
                </div>
                     <div class="input-Div">
                        <p>Upload profile image</p>
                        <input id="instructor-image" type="file" name="" accept="image/">
                    </div>

                    <div class="Submit-Div">
                        <input id="submit-instructor" type="submit" name="" value="Submit">
                    </div>
                </form>
            </div>
        </div>
    </section>






    <section class="site-content">
        <div class="nav-sec">
            <div class="nav-sec-main Box-Show">

                <div class="top-side-nav">
                    <i class="icon-menu"></i>
                    <span>Menu</span>
                 </div>
                  <div class="m-search-Sec">
                            <button>
                                <img src="svg/search.svg">
                            </button>
                            <input type="text" name="" placeholder="Search..">
                    </div>

                     <div class="side-nav-Icon">

                         <ul>
                             <li>
                                <a href="dashboard.html"><i class="icon-speedometer"></i> <span>Dashboard</a>
                            </li>
                            <li class="active-sideIcon">
                                <a href="category.html"><i class="icon-pie-chart"></i> <span>Course categories</span></a>
                            </li>
                             <li>
                                <a href="courses.html"><i class="icon-layers"></i> <span>Courses</span></a>
                            </li>


                              <li><a href="enrolled-courses.html"><i class="icon-book-open"></i> <span>Enrolled courses</span> </a></li>

                              <li class="active-sideIcon"><a href="instructors.html"><i class="icon-badge"></i> <span>Instructors</span> </a></li>

                               <li><a href="users.html"><i class="icon-people"></i> <span>Users</span> </a></li>


                              <li><a href="profile.html"><i class="icon-user"></i> <span>Profile settings</span> </a></li>


                             <li><a href="#"><i class="icon-logout"></i> <span>Logout</span></a></li>

                         </ul>
                     </div>



            </div>
        </div><!--nav-sec-->
        <div class="main-section">
            <div class="main-sectionMain">
                <div class="nav-body"></div>
            <nav class="main-topNav Box-Show">
                <div class="main-sectionMain-0">
                <div class="site-container">
                    <div class="nanAv-1">
                         <div class="nav-togller">
                            <i class="ti-menu"></i>
                            <span>
                                <svg height="14" viewBox="0 0 16 16" width="18" xmlns="http://www.w3.org/2000/svg" aria-label="close" class="" name="close"><path d="M8.95 8l5.853-5.854a.671.671 0 1 0-.95-.95L8 7.05 2.146 1.198a.671.671 0 1 0-.95.95L7.05 8l-5.852 5.853a.671.671 0 0 0 .948.95L8 8.948l5.854 5.854a.671.671 0 1 0 .948-.95L8.95 8z" fill="#151A1E" fill-rule="nonzero" stroke="#151A1E"></path></svg>
                            </span>
                        </div>
                        <a href="../index.html" class="nv-logo"><img src="img/logo.png"></a>
                        <div class="search-Sec">
                            <button>
                                <img src="svg/search.svg">
                            </button>
                            <input type="text" name="" placeholder="Search..">
                    </div>
                    </div>
                    <div class="nanAv-2">
                        <ul class="nanAv-2-icons">
                            <li>
                                <a href="../index.html"><span class="homa-ye">Home</span><i class="icon-home"></i></a>
                            </li>


                            <li><a href="profile.html"><span class="accnt-ion">Profile</span> <span class="user-imgSpan"><img src="img/user-img.jpg"></span></a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            </nav>



            <div class="dashboard-sec">
                <div class="main-Dash-sec">
                <div class="site-container">


                    <div class="affiliate-Sec Box-Show">
                       <div class="hello-intro">
                              <h1>Instructors</h1>
                                    <ul>
                                      <li>A.R.T.S</li>
                                      <li>Admin</li>
                                      <li class="active-li">Instructors</li>
                                    </ul>
                               </div>


                               
                            <div class="p-Main-t">
                                <ul>
                                    <li class="active-ppt"><a href="#">All</a></li>
                                    <li><a href="#">Most Recent</a></li>
                                    <li><a href="#">Old</a></li>
                                </ul>
                                <div class="p-Main-tt">
                                <p>Search</p>
                                <div class="p-Main-t-search">
                                    <input type="text" name="" placeholder="Instructors"/>
                                    <button><img src="svg/search1.svg"></button>
                                </div>
                            </div>
                            </div>



                    </div><!--affiliate-Sec-->



                        <div class="affiliate-Sec Box-Show">
                       <div class="top-das-1-header">
                            <h3>List of instructors</h3>
                            <button class="instructor-Btn"><i class="fa fa-plus"></i> add instructor</button>
                        </div>

                        <div class="Sec-table">
                            <table>
                                <thead>
                                   <tr>
                                        <th>S/N</th>
                                        <th>Instructor</th>
                                        <th>Allocated courses</th>
                                        <th>Completed courses</th>
                                        <th>Pending courses</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!--  <tr>
                                        <td>1</td>
                                        <td>
                                            <div class="instruc-dlt-main">
                                          <div class="instruc-profl">
                                               <div class="instruc-profl-grid">
                                            <div class="profl-img">
                                              <div class="profl-img-main">
                                                <img src="img/staffs/1.jpg">
                                              <span class="online"></span>
                                            </div>
                                              
                                            </div>
                                            <div class="profl-dlts">
                                              <p>Ndubuisi Prince Godson</p>
                                            </div>
                                          </div>
                                        </div>
                                        </td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>
                                            <div class="action-btns">
                                                <a href="instructor-profile.html"><i class="icon-user"></i> Profile</a>
                                                <button><i class="ti-close"></i>  Remove</button>
                                            </div>
                                        </td>
                                    </tr>

                                     <tr>
                                        <td>2</td>
                                        <td>
                                            <div class="instruc-dlt-main">
                                          <div class="instruc-profl">
                                               <div class="instruc-profl-grid">
                                            <div class="profl-img">
                                              <div class="profl-img-main">
                                                <img src="img/staffs/1.jpg">
                                              <span class="online"></span>
                                            </div>
                                              
                                            </div>
                                            <div class="profl-dlts">
                                              <p>Ndubuisi Prince Godson</p>
                                            </div>
                                          </div>
                                        </div>
                                        </td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>
                                            <div class="action-btns">
                                                <a href="instructor-profile.html"><i class="icon-user"></i> Profile</a>
                                                <button><i class="ti-close"></i>  Remove</button>
                                            </div>
                                        </td>
                                    </tr> -->
<!-- 
                                     <tr>
                                        <td>3</td>
                                        <td>
                                            <div class="instruc-dlt-main">
                                          <div class="instruc-profl">
                                               <div class="instruc-profl-grid">
                                            <div class="profl-img">
                                              <div class="profl-img-main">
                                                <img src="img/staffs/1.jpg">
                                              <span class="online"></span>
                                            </div>
                                              
                                            </div>
                                            <div class="profl-dlts">
                                              <p>Ndubuisi Prince Godson</p>
                                            </div>
                                          </div>
                                        </div>
                                        </td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>
                                            <div class="action-btns">
                                                <a href="instructor-profile.html"><i class="icon-user"></i> Profile</a>
                                                <button><i class="ti-close"></i>  Remove</button>
                                            </div>
                                        </td>
                                    </tr> -->


                                     <!-- <tr>
                                        <td>4</td>
                                        <td>
                                            <div class="instruc-dlt-main">
                                          <div class="instruc-profl">
                                               <div class="instruc-profl-grid">
                                            <div class="profl-img">
                                              <div class="profl-img-main">
                                                <img src="img/staffs/1.jpg">
                                              <span class="online"></span>
                                            </div>
                                              
                                            </div>
                                            <div class="profl-dlts">
                                              <p>Ndubuisi Prince Godson</p>
                                            </div>
                                          </div>
                                        </div>
                                        </td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>
                                            <div class="action-btns">
                                                <a href="instructor-profile.html"><i class="icon-user"></i> Profile</a>
                                                <button><i class="ti-close"></i>  Remove</button>
                                            </div>
                                        </td>
                                    </tr> -->

                                </tbody>
                            </table>
                        </div>

                        

                    </div><!--affiliate-Sec-->


                
      

                </div>

            </div><!--main-Dash-sec-->
                   <footer class="site-footer Box-Show">
                    <div class="site-container">
                   <p>© <script>document.write(new Date().getFullYear())</script> A.R.T.S</p>
               </div>
           </footer>
            </div>





















        </div>
        </div><!--main-section-->
    </section><!--site-content-->


   <script src="js/jquery-3.3.1.min.js"></script>
   <script src="js/owl.carousel.min.js"></script>
   <script src="js/aos.js"></script>
    <script src="js/loader.js"></script>
     <script src="js/main.js"></script>
         <script src='js/chart.js'></script>
    <script src="js/chat-canvas.js"></script>
    
    <script>
        fetch(`${SERVER_URL}/course/instructors/`)
            .then(response => response.json())
            .then(data => {
                // console.log('API Response:', data); // Log the API response
    
                // Reference to the table body
                const tbody = document.querySelector('.Sec-table tbody');
                // Ensure the table body exists
                if (!tbody) {
                    console.error('Table body not found');
                    return;
                }
    
                // Loop through each instructor object in the response
                data.forEach((instructor, index) => {
                    // console.log('Processing instructor:', instructor); // Log each instructor object
    
                    // Create a new row for each instructor
                    const row = document.createElement('tr');
                    // console.log(instructor.image)
    
                    // Populate the row with data
                    row.innerHTML = `
                        <td>${index + 1}</td>
                        <td>
                            <div class="instruc-dlt-main">
                                <div class="instruc-profl">
                                    <div class="instruc-profl-grid">
                                        <div class="profl-img">
                                            <div class="profl-img-main">
                                                <img src="${SERVER_URL}${instructor.image}" alt ="Not Found">
                                                <span class="online"></span>
                                            </div>
                                        </div>
                                        <div class="profl-dlts">
                                            <p>${instructor.instructor_first_name } ${instructor.instructor_last_name}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </td>
                        
                        <td>${instructor.courses_assigned !== null ? instructor.courses_assigned  : 0}</td>
                        <td>${instructor.number_of_students !== null ? instructor.number_of_students  : 0}</td>
                        <td>${instructor.courses_assigned !== null ? instructor.courses_assigned  : 0}</td>
                     
                        <td>
                            <div class="action-btns">
                                <a href="instructor-profile.html?instructor_id=${instructor.id}"><i class="icon-user"></i> Profile</a>
                                <button><i class="ti-close"></i>  Remove</button>
                            </div>
                        </td>
                    `;
    
                    // Append the row to the table body
                    tbody.appendChild(row);
                });
            })
            .catch(error => console.error('Error fetching data:', error));
    </script>



    <script>



// Add event listener to the form submission
document.getElementById('submit-instructor').addEventListener('click', function(event) {
            event.preventDefault(); // Prevent default form submission behavior
    
            // Get form data
            let instructor_email = document.getElementById('instructor-email').value;
            let instructor_first_name = document.getElementById('instructor-first-name').value;
            let instructor_last_name = document.getElementById('instructor-last-name').value;
            let imageInput = document.getElementById('instructor-image');
            let image = imageInput.files[0];
            

            // Create a FormData object
            let formData = new FormData();
            formData.append('email', instructor_email);
            formData.append('instructor_first_name', instructor_first_name);
            formData.append('instructor_last_name', instructor_last_name);
            formData.append('image', image);
    
            // Send POST request using fetch API
            document.getElementById('submit-instructor').textContent = "Submitting ..."
            fetch(`${SERVER_URL}/course/instructors/`, {
                method: 'POST',
                body: formData,
            })
            .then(response => {
                if (response.ok) {
                    // Category created successfully
                    document.getElementById('submit-instructor').textContent = "Submitting"
                    window.location.href = "instructors.html";
                } else {
                    // Error handling
                    throw new Error('Failed to create instructor');
                }
            })
            .catch(error => {
                document.getElementById('submit-instructor').textContent = "Submitting"
                console.error('Error:', error);
                alert('An error occurred while creating the instructors.');
            });
        });

    </script>
   </body>
   </html>